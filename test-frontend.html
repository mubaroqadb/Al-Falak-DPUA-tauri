<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Component Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>üî¨ Frontend Component Test</h1>
    
    <div class="test-section">
        <h2>Component Registration Status</h2>
        <div id="component-status"></div>
    </div>

    <div class="test-section">
        <h2>JavaScript Errors</h2>
        <div id="error-log"></div>
    </div>

    <div class="test-section">
        <h2>Console Logs</h2>
        <div id="console-log"></div>
    </div>

    <script type="module">
        const componentStatus = document.getElementById('component-status');
        const errorLog = document.getElementById('error-log');
        const consoleLog = document.getElementById('console-log');

        // Track errors
        window.addEventListener('error', (e) => {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'status error';
            errorDiv.innerHTML = `<strong>Error:</strong> ${e.message}<br>
                                  <strong>File:</strong> ${e.filename}:${e.lineno}:${e.colno}<br>
                                  <strong>Stack:</strong> ${e.error?.stack || 'N/A'}`;
            errorLog.appendChild(errorDiv);
        });

        // Intercept console
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        console.log = (...args) => {
            originalLog(...args);
            const div = document.createElement('div');
            div.className = 'status info';
            div.textContent = 'LOG: ' + args.join(' ');
            consoleLog.appendChild(div);
        };

        console.error = (...args) => {
            originalError(...args);
            const div = document.createElement('div');
            div.className = 'status error';
            div.textContent = 'ERROR: ' + args.join(' ');
            consoleLog.appendChild(div);
        };

        console.warn = (...args) => {
            originalWarn(...args);
            const div = document.createElement('div');
            div.className = 'status';
            div.style.background = '#fff3cd';
            div.style.color = '#856404';
            div.textContent = 'WARN: ' + args.join(' ');
            consoleLog.appendChild(div);
        };

        // Test component imports
        const components = [
            'TauriStatusBanner',
            'MapVisualization',
            'CriteriaPanel',
            'ResultsDisplay',
            'CriteriaResultsDisplay',
            'ValidationPanel',
            'DetailedEphemerisDisplay'
        ];

        async function testComponents() {
            console.log('Testing component imports...');
            
            try {
                // Import each component
                await import('./src/components/TauriStatusBanner.js');
                await import('./src/components/MapVisualization.js');
                await import('./src/components/CriteriaPanel.js');
                await import('./src/components/ResultsDisplay.js');
                await import('./src/components/CriteriaResultsDisplay.js');
                await import('./src/components/ValidationPanel.js');
                await import('./src/components/DetailedEphemerisDisplay.js');
                
                // Check if components are registered
                const customElementNames = [
                    'tauri-status-banner',
                    'map-visualization',
                    'criteria-panel',
                    'results-display',
                    'criteria-results-display',
                    'validation-panel',
                    'detailed-ephemeris-display'
                ];

                for (const name of customElementNames) {
                    const registered = customElements.get(name);
                    const statusDiv = document.createElement('div');
                    statusDiv.className = 'status ' + (registered ? 'success' : 'error');
                    statusDiv.innerHTML = `<strong>${name}:</strong> ${registered ? '‚úÖ Registered' : '‚ùå Not Registered'}`;
                    componentStatus.appendChild(statusDiv);
                }

                console.log('Component test completed');
            } catch (error) {
                console.error('Component test failed:', error);
            }
        }

        testComponents();
    </script>
</body>
</html>
